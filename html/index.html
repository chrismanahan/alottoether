<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" type="text/css" href="main.css">

    <script src="./node_modules/web3/dist/web3.min.js"></script>

</head>
<body>
    <div class="container">

        <h1 id="title">A Lot O' Ether</h1>
        <h3 id="subtitle">Ether Lotto</h3>

        <label for="totalPool" class="col-lg-2 control-label">Total Pool</label>
        <span id="totalPool" type="text"></span>

        <label for="name" class="col-lg-2 control-label">Amount</label>
        <input id="entryAmount" type="text">

        <button id="enterLottery">Enter Lottery</button>


    </div>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

    <script>

       if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        } else {
            // set the provider you want from Web3.providers
            web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
        }

        // set default account
        web3.eth.defaultAccount = web3.eth.accounts[0];

        var jsonString = JSON.stringify({"contractName":"Lottery","abi":[{"constant":true,"inputs":[{"name":"_address","type":"address"}],"name":"getEntryCountForAddress","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"endLottery","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getEndTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getAllEntries","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalPool","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"highestPool","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"enterLottery","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"allEntries","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"referrer","type":"address"}],"name":"enterLotteryFromReferrer","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"pastWinners","outputs":[{"name":"winningAddress","type":"address"},{"name":"winningAmount","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalPool","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getRemainingTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"entries","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_by","type":"address"},{"indexed":false,"name":"newValue","type":"uint256"}],"name":"PoolUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_by","type":"address"},{"indexed":false,"name":"numberEntries","type":"uint256"}],"name":"EntriesAcquired","type":"event"}],"bytecode":"0x6060604052601e600755662386f26fc10000600855341561001f57600080fd5b336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061007a61007f64010000000002610da1176401000000009004565b61008c565b6007544201600681905550565b610dda8061009b6000396000f3006060604052600436106100da576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168062c2707c146100e45780631593a8c714610131578063439f5ac2146101465780634a0364e81461016f57806375f4d677146101d95780638da5cb5b14610202578063bb462d1714610257578063c1af578514610280578063c68752491461028a578063c927bdc7146102ed578063e499e79c1461031b578063ecfb49a314610385578063efb98bcf146103ae578063f29ee125146103d7578063f2fde38b14610424575b6100e261045d565b005b34156100ef57600080fd5b61011b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061056f565b6040518082815260200191505060405180910390f35b341561013c57600080fd5b6101446105b8565b005b341561015157600080fd5b6101596106ad565b6040518082815260200191505060405180910390f35b341561017a57600080fd5b6101826106b7565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b838110156101c55780820151818401526020810190506101aa565b505050509050019250505060405180910390f35b34156101e457600080fd5b6101ec61074b565b6040518082815260200191505060405180910390f35b341561020d57600080fd5b610215610755565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561026257600080fd5b61026a61077a565b6040518082815260200191505060405180910390f35b61028861045d565b005b341561029557600080fd5b6102ab6004808035906020019091905050610780565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610319600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506107bf565b005b341561032657600080fd5b61033c6004808035906020019091905050610859565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390f35b341561039057600080fd5b6103986108ac565b6040518082815260200191505060405180910390f35b34156103b957600080fd5b6103c16108b2565b6040518082815260200191505060405180910390f35b34156103e257600080fd5b61040e600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108be565b6040518082815260200191505060405180910390f35b341561042f57600080fd5b61045b600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108d6565b005b6000600854341015151561047057600080fd5b346003600082825401925050819055506104886109ab565b905061049433826109c0565b7f448ac6e1f92096fa4600ee209fc061db75b16ecab9d4754f7573779f8e54a6063382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a17f2f4ae87a584f00dc35b043dd1c5ac839c1f41cd3a66e834d4e13faa6251634e633600354604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a150565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561061657600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561067157600080fd5b4260065410151561068157600080fd5b610689610a91565b915091506106978282610b0b565b6106a18282610bc5565b6106a9610c83565b5050565b6000600654905090565b6106bf610c9b565b600280548060200260200160405190810160405280929190818152602001828054801561074157602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116106f7575b5050505050905090565b6000600354905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60045481565b60028181548110151561078f57fe5b90600052602060002090016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60085434101515156107d057600080fd5b60008173ffffffffffffffffffffffffffffffffffffffff16141515156107f657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561083157600080fd5b61084e81600261083f6109ab565b81151561084857fe5b046109c0565b61085661045d565b50565b60058181548110151561086857fe5b90600052602060002090600202016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154905082565b60035481565b60004260065403905090565b60016020528060005260406000206000915090505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561093157600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415156109a857806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b6000600854348115156109ba57fe5b04905090565b600081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550600090505b81811015610a8c5760028054806001018281610a309190610caf565b9160005260206000209001600085909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550508080600101915050610a14565b505050565b60008060006014600354811515610aa457fe5b04600354039150600280549050434060019004811515610ac057fe5b069050600281815481101515610ad257fe5b906000526020600020900160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169250828292509250509091565b6003548111151515610b1c57600080fd5b8173ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501515610b5c57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc82600354039081150290604051600060405180830381858888f193505050501515610bc157600080fd5b5050565b60058054806001018281610bd99190610cdb565b9160005260206000209060020201600060408051908101604052808673ffffffffffffffffffffffffffffffffffffffff16815260200185815250909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010155505050600454811115610c7f57806004819055505b5050565b600060038190555060026000610c999190610d0d565b565b602060405190810160405280600081525090565b815481835581811511610cd657818360005260206000209182019101610cd59190610d2e565b5b505050565b815481835581811511610d0857600202816002028360005260206000209182019101610d079190610d53565b5b505050565b5080546000825590600052602060002090810190610d2b9190610d2e565b50565b610d5091905b80821115610d4c576000816000905550600101610d34565b5090565b90565b610d9e91905b80821115610d9a57600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600182016000905550600201610d59565b5090565b90565b60075442016006819055505600a165627a7a723058205d451c28a1f67e696b3e8f1160ae1b9adf89f8d22963669a9cc1584e21c5cfda0029","deployedBytecode":"0x6060604052600436106100da576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168062c2707c146100e45780631593a8c714610131578063439f5ac2146101465780634a0364e81461016f57806375f4d677146101d95780638da5cb5b14610202578063bb462d1714610257578063c1af578514610280578063c68752491461028a578063c927bdc7146102ed578063e499e79c1461031b578063ecfb49a314610385578063efb98bcf146103ae578063f29ee125146103d7578063f2fde38b14610424575b6100e261045d565b005b34156100ef57600080fd5b61011b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190505061056f565b6040518082815260200191505060405180910390f35b341561013c57600080fd5b6101446105b8565b005b341561015157600080fd5b6101596106ad565b6040518082815260200191505060405180910390f35b341561017a57600080fd5b6101826106b7565b6040518080602001828103825283818151815260200191508051906020019060200280838360005b838110156101c55780820151818401526020810190506101aa565b505050509050019250505060405180910390f35b34156101e457600080fd5b6101ec61074b565b6040518082815260200191505060405180910390f35b341561020d57600080fd5b610215610755565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b341561026257600080fd5b61026a61077a565b6040518082815260200191505060405180910390f35b61028861045d565b005b341561029557600080fd5b6102ab6004808035906020019091905050610780565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b610319600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506107bf565b005b341561032657600080fd5b61033c6004808035906020019091905050610859565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390f35b341561039057600080fd5b6103986108ac565b6040518082815260200191505060405180910390f35b34156103b957600080fd5b6103c16108b2565b6040518082815260200191505060405180910390f35b34156103e257600080fd5b61040e600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108be565b6040518082815260200191505060405180910390f35b341561042f57600080fd5b61045b600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506108d6565b005b6000600854341015151561047057600080fd5b346003600082825401925050819055506104886109ab565b905061049433826109c0565b7f448ac6e1f92096fa4600ee209fc061db75b16ecab9d4754f7573779f8e54a6063382604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a17f2f4ae87a584f00dc35b043dd1c5ac839c1f41cd3a66e834d4e13faa6251634e633600354604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a150565b6000600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000806000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561061657600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561067157600080fd5b4260065410151561068157600080fd5b610689610a91565b915091506106978282610b0b565b6106a18282610bc5565b6106a9610c83565b5050565b6000600654905090565b6106bf610c9b565b600280548060200260200160405190810160405280929190818152602001828054801561074157602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116106f7575b5050505050905090565b6000600354905090565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60045481565b60028181548110151561078f57fe5b90600052602060002090016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60085434101515156107d057600080fd5b60008173ffffffffffffffffffffffffffffffffffffffff16141515156107f657600080fd5b3373ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415151561083157600080fd5b61084e81600261083f6109ab565b81151561084857fe5b046109c0565b61085661045d565b50565b60058181548110151561086857fe5b90600052602060002090600202016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010154905082565b60035481565b60004260065403905090565b60016020528060005260406000206000915090505481565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561093157600080fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415156109a857806000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505b50565b6000600854348115156109ba57fe5b04905090565b600081600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008282540192505081905550600090505b81811015610a8c5760028054806001018281610a309190610caf565b9160005260206000209001600085909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550508080600101915050610a14565b505050565b60008060006014600354811515610aa457fe5b04600354039150600280549050434060019004811515610ac057fe5b069050600281815481101515610ad257fe5b906000526020600020900160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169250828292509250509091565b6003548111151515610b1c57600080fd5b8173ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501515610b5c57600080fd5b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc82600354039081150290604051600060405180830381858888f193505050501515610bc157600080fd5b5050565b60058054806001018281610bd99190610cdb565b9160005260206000209060020201600060408051908101604052808673ffffffffffffffffffffffffffffffffffffffff16815260200185815250909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010155505050600454811115610c7f57806004819055505b5050565b600060038190555060026000610c999190610d0d565b565b602060405190810160405280600081525090565b815481835581811511610cd657818360005260206000209182019101610cd59190610d2e565b5b505050565b815481835581811511610d0857600202816002028360005260206000209182019101610d079190610d53565b5b505050565b5080546000825590600052602060002090810190610d2b9190610d2e565b50565b610d5091905b80821115610d4c576000816000905550600101610d34565b5090565b90565b610d9e91905b80821115610d9a57600080820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600182016000905550600201610d59565b5090565b90565b60075442016006819055505600a165627a7a723058205d451c28a1f67e696b3e8f1160ae1b9adf89f8d22963669a9cc1584e21c5cfda0029","sourceMap":"576:3247:0:-;;;1065:10;1035:40;;1106:9;1078:37;;1269:49;;;;;;;;302:10;294:5;;:18;;;;;;;;;;;;;;;;;;1299:15;:13;;;;;:15;;;:::i;:::-;576:3247;;3750:71;3803:14;;3797:3;:20;3787:7;:30;;;;3750:71::o;576:3247::-;;;;;;;","deployedSourceMap":"576:3247:0:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1416:14;:12;:14::i;:::-;576:3247;2438:114;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2014:236;;;;;;;;;;;;;;2645:75;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2349:86;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;23:1:-1;8:100;33:3;30:1;27:2;8:100;;;99:1;94:3;90;84:5;80:1;75:3;71;64:6;52:2;49:1;45:3;40:15;;8:100;;;12:14;3:109;;;;;;;;;;;;;;;;;2267:79:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;237:20;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;940:23;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1540:245;;;;;;864:27;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1788:223;;;;;;;;;;;;;;;;;;;;966:27;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;894:21;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2555:87;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;821:40;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;392:131;;;;;;;;;;;;;;;;;;;;;;;;;;;;1540:245;1622:15;1182:12;;1169:9;:25;;1161:34;;;;;;;;1609:9;1596;;:22;;;;;;;;;;;1640:18;:16;:18::i;:::-;1622:36;;1662:38;1677:10;1689;1662:14;:38::i;:::-;1704:39;1720:10;1732;1704:39;;;;;;;;;;;;;;;;;;;;;;;;;;;;1747:34;1759:10;1771:9;;1747:34;;;;;;;;;;;;;;;;;;;;;;;;;;;;1540:245;:::o;2438:114::-;2514:4;2531:7;:17;2539:8;2531:17;;;;;;;;;;;;;;;;2524:24;;2438:114;;;:::o;2014:236::-;2121:6;2129:8;370:5;;;;;;;;;;;356:19;;:10;:19;;;348:28;;;;;;;;2079:5;;;;;;;;;;;2065:19;;:10;:19;;;2057:28;;;;;;;;2107:3;2097:7;;:13;2089:22;;;;;;;;2141:16;:14;:16::i;:::-;2116:41;;;;2161:35;2179:6;2187:8;2161:17;:35::i;:::-;2200:34;2217:6;2225:8;2200:16;:34::i;:::-;2238:8;:6;:8::i;:::-;2014:236;;:::o;2645:75::-;2692:4;2709:7;;2702:14;;2645:75;:::o;2349:86::-;2399:9;;:::i;:::-;2421:10;2414:17;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2349:86;:::o;2267:79::-;2316:4;2333:9;;2326:16;;2267:79;:::o;237:20::-;;;;;;;;;;;;;:::o;940:23::-;;;;:::o;864:27::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;1788:223::-;1182:12;;1169:9;:25;;1161:34;;;;;;;;1892:3;1880:8;:15;;;;1872:24;;;;;;;;1920:10;1908:22;;:8;:22;;;;1900:31;;;;;;;;1935:54;1950:8;1986:1;1965:18;:16;:18::i;:::-;:22;;;;;;;;1935:14;:54::i;:::-;1993:14;:12;:14::i;:::-;1788:223;:::o;966:27::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;894:21::-;;;;:::o;2555:87::-;2608:4;2635:3;2625:7;;:13;2618:20;;2555:87;:::o;821:40::-;;;;;;;;;;;;;;;;;:::o;392:131::-;370:5;;;;;;;;;;;356:19;;:10;:19;;;348:28;;;;;;;;484:1;464:22;;:8;:22;;;;460:59;;;504:8;496:5;;:16;;;;;;;;;;;;;;;;;;460:59;392:131;:::o;2930:95::-;2980:4;3009:12;;2997:9;:24;;;;;;;;2990:31;;2930:95;:::o;2745:182::-;2856:6;2837:10;2816:7;:17;2824:8;2816:17;;;;;;;;;;;;;;;;:31;;;;;;;;;;;2865:1;2856:10;;2851:73;2872:10;2868:1;:14;2851:73;;;2894:10;:25;;;;;;;;;;;:::i;:::-;;;;;;;;;;2910:8;2894:25;;;;;;;;;;;;;;;;;;;;;;;2884:3;;;;;;;2851:73;;;2745:182;;;:::o;3028:271::-;3076:14;3092:13;3154:17;3147:2;3135:9;;:14;;;;;;;;3122:9;;:28;3111:39;;3212:10;:17;;;;3195:12;3179:29;3174:35;;;:55;;;;;;;;3154:75;;3242:10;3253:12;3242:24;;;;;;;;;;;;;;;;;;;;;;;;;;;;3233:33;;3278:6;3286:8;3270:25;;;;3028:271;;;:::o;3302:173::-;3392:9;;3380:8;:21;;3372:30;;;;;;;;3406:6;:15;;:25;3422:8;3406:25;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3435:5;;;;;;;;;;;:14;;:36;3462:8;3450:9;;:20;3435:36;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3302:173;;:::o;3478:178::-;3547:11;:42;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;3564:24;;;;;;;;;3571:6;3564:24;;;;;;3579:8;3564:24;;;3547:42;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3608:11;;3597:8;:22;3593:60;;;3640:8;3626:11;:22;;;;3593:60;3478:178;;:::o;3659:88::-;3701:1;3689:9;:13;;;;3713:10;;3706:17;;;;:::i;:::-;3659:88::o;576:3247::-;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;3750:71::-;3803:14;;3797:3;:20;3787:7;:30;;;;3750:71::o","source":"pragmasolidity^0.4.11;\n\n/**\n*@titleOwnable\n*@devTheOwnablecontracthasanowneraddress,andprovidesbasicauthorizationcontrol\n*functions,thissimplifiestheimplementationof\"userpermissions\".\n*/\ncontractOwnable{\naddresspublicowner;\n\nfunctionOwnable()public{\nowner=msg.sender;\n}\n\nmodifieronlyOwner(){\nrequire(msg.sender==owner);\n_;\n}\n\nfunctiontransferOwnership(addressnewOwner)onlyOwnerpublic{\nif(newOwner!=address(0)){\nowner=newOwner;\n}\n}\n\n}\n\n\n/*\tLotterythatisdrawnonaweeklybasis\n*/\ncontractLotteryisOwnable{\n\n\teventPoolUpdated(address_by,uintnewValue);\n\teventEntriesAcquired(address_by,uintnumberEntries);\n\n\tstructWinner{\n\t\taddresswinningAddress;\n\t\tuintwinningAmount;\n\t}\n\n/*Properties*/\t\n\t//currentdrawing\n\tmapping(address=>uint)publicentries;\n\taddress[]publicallEntries;\n\tuintpublictotalPool;\n\n\t//trackinghistory\n\tuintpublichighestPool;\n\tWinner[]publicpastWinners;\n\n\t//internal\n\tuintprivateendTime;\n\n\tuintprivateLOTTO_DURATION=30seconds;\n\tuintprivateENTRY_AMOUNT=10finney;//0.01ether\n\n\tmodifierrequireEntry(){\n\t\trequire(msg.value>=ENTRY_AMOUNT);//requireenoughforatleastoneentry\n\t\t_;\n\t}\n\n/*Initialization*/\n\tfunctionLottery()public{\n\t\t_beginLottery();\n\t}\n\n\t//fallbackfunctionforsendingetherdirectlytothecontract\n\tfunction()publicpayable{\n\t\tenterLottery();\n\t}\n\n/*PublicFunctions*/\n\t//Entersintothelottery.1Finney=1entry\n\t//i.e.1Ether=1000entries\n\tfunctionenterLottery()publicpayablerequireEntry{\n\t\ttotalPool+=msg.value;\n\t\tuintnumEntries=_numberOfEntries();\n\t\t_addEntriesFor(msg.sender,numEntries);\n\t\tEntriesAcquired(msg.sender,numEntries);\n\t\tPoolUpdated(msg.sender,totalPool);\n\t}\n\n\tfunctionenterLotteryFromReferrer(addressreferrer)publicpayablerequireEntry{\n\t\trequire(referrer!=0x0);\n\t\trequire(referrer!=msg.sender);\n\t\t_addEntriesFor(referrer,uint(_numberOfEntries()/2));\n\t\tenterLottery();\n\t}\n\n\tfunctionendLottery()publiconlyOwner{\n\t\trequire(msg.sender==owner);\n\t\trequire(endTime<now);\n\n\t\tvar(winner,winnings)=_declareWinner();\n\t\t_transferWinnings(winner,winnings);\n\t\t_finalizeDrawing(winner,winnings);\n\t\t_drain();\n\t}\n\n/*Getters*/\n\tfunctiongetTotalPool()publicconstantreturns(uint){\n\t\treturntotalPool;\n\t}\n\n\tfunctiongetAllEntries()publicconstantreturns(address[]){\n\t\treturnallEntries;\n\t}\n\n\tfunctiongetEntryCountForAddress(address_address)publicconstantreturns(uint){\n\t\treturnentries[_address];\n\t}\n\n\tfunctiongetRemainingTime()publicconstantreturns(uint){\n\t\treturnendTime-now;\n\t}\n\n\tfunctiongetEndTime()publicconstantreturns(uint){\n\t\treturnendTime;\n\t}\n\n/*PrivateHelpers*/\n\tfunction_addEntriesFor(address_address,uintnumEntries)private{\n\t\tentries[_address]+=numEntries;\n\t\tfor(uinti=0;i<numEntries;i++){\n\t\t\tallEntries.push(_address);\n\t\t}\n\t}\n\n\tfunction_numberOfEntries()privateviewreturns(uint){\n\t\treturnmsg.value/ENTRY_AMOUNT;\n\t}\n\n\tfunction_declareWinner()privateviewreturns(addresswinner,uintwinnings){\n\t\twinnings=totalPool-(totalPool/20);\n\t\tuintwinningIndex=uint(block.blockhash(block.number))%allEntries.length;\n\t\twinner=allEntries[winningIndex];\n\t\treturn(winner,winnings);\n\t}\n\n\tfunction_transferWinnings(addresswinner,uintwinnings)private{\n\t\trequire(winnings<=totalPool);\n\t\twinner.transfer(winnings);\n\t\towner.transfer(totalPool-winnings);\n\t}\n\n\tfunction_finalizeDrawing(addresswinner,uintwinnings)private{\n\t\tpastWinners.push(Winner(winner,winnings));\n\t\tif(winnings>highestPool){\n\t\t\thighestPool=winnings;\n\t\t}\n\t}\n\n\tfunction_drain()private{\n\t\ttotalPool=0;\n\t\tdeleteallEntries;\n\t\t//deleteentries;\n\t}\n\n\tfunction_beginLottery()private{\n\t\tendTime=now+LOTTO_DURATION;\n\t}\n}","sourcePath":"/Users/chrism/Dev/ethereum/lottery/contracts/Lottery.sol","ast":{"attributes":{"absolutePath":"/Users/chrism/Dev/ethereum/lottery/contracts/Lottery.sol","exportedSymbols":{"Lottery":[420],"Ownable":[43]}},"children":[{"attributes":{"literals":["solidity","^","0.4",".11"]},"id":1,"name":"PragmaDirective","src":"0:24:0"},{"attributes":{"baseContracts":[null],"contractDependencies":[null],"contractKind":"contract","documentation":"@titleOwnable\n@devTheOwnablecontracthasanowneraddress,andprovidesbasicauthorizationcontrol\nfunctions,thissimplifiestheimplementationof\"userpermissions\".","fullyImplemented":true,"linearizedBaseContracts":[43],"name":"Ownable","scope":421},"children":[{"attributes":{"constant":false,"name":"owner","scope":43,"stateVariable":true,"storageLocation":"default","type":"address","value":null,"visibility":"public"},"children":[{"attributes":{"name":"address","type":"address"},"id":2,"name":"ElementaryTypeName","src":"237:7:0"}],"id":3,"name":"VariableDeclaration","src":"237:20:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":true,"modifiers":[null],"name":"Ownable","payable":false,"scope":43,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":4,"name":"ParameterList","src":"278:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":5,"name":"ParameterList","src":"288:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":3,"type":"address","value":"owner"},"id":6,"name":"Identifier","src":"294:5:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":7,"name":"Identifier","src":"302:3:0"}],"id":8,"name":"MemberAccess","src":"302:10:0"}],"id":9,"name":"Assignment","src":"294:18:0"}],"id":10,"name":"ExpressionStatement","src":"294:18:0"}],"id":11,"name":"Block","src":"288:29:0"}],"id":12,"name":"FunctionDefinition","src":"262:55:0"},{"attributes":{"name":"onlyOwner","visibility":"internal"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":13,"name":"ParameterList","src":"339:2:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":14,"name":"Identifier","src":"348:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"==","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":15,"name":"Identifier","src":"356:3:0"}],"id":16,"name":"MemberAccess","src":"356:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":3,"type":"address","value":"owner"},"id":17,"name":"Identifier","src":"370:5:0"}],"id":18,"name":"BinaryOperation","src":"356:19:0"}],"id":19,"name":"FunctionCall","src":"348:28:0"}],"id":20,"name":"ExpressionStatement","src":"348:28:0"},{"id":21,"name":"PlaceholderStatement","src":"382:1:0"}],"id":22,"name":"Block","src":"342:46:0"}],"id":23,"name":"ModifierDefinition","src":"321:67:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"name":"transferOwnership","payable":false,"scope":43,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"children":[{"attributes":{"constant":false,"name":"newOwner","scope":42,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":24,"name":"ElementaryTypeName","src":"419:7:0"}],"id":25,"name":"VariableDeclaration","src":"419:16:0"}],"id":26,"name":"ParameterList","src":"418:18:0"},{"attributes":{"parameters":[null]},"children":[],"id":29,"name":"ParameterList","src":"454:0:0"},{"attributes":{"arguments":[null]},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":23,"type":"modifier()","value":"onlyOwner"},"id":27,"name":"Identifier","src":"437:9:0"}],"id":28,"name":"ModifierInvocation","src":"437:9:0"},{"children":[{"attributes":{"falseBody":null},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"!=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":25,"type":"address","value":"newOwner"},"id":30,"name":"Identifier","src":"464:8:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":true,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"address","type_conversion":true},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const0"}],"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"type":"type(address)","value":"address"},"id":31,"name":"ElementaryTypeNameExpression","src":"476:7:0"},{"attributes":{"argumentTypes":null,"hexvalue":"30","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const0","value":"0"},"id":32,"name":"Literal","src":"484:1:0"}],"id":33,"name":"FunctionCall","src":"476:10:0"}],"id":34,"name":"BinaryOperation","src":"464:22:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":3,"type":"address","value":"owner"},"id":35,"name":"Identifier","src":"496:5:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":25,"type":"address","value":"newOwner"},"id":36,"name":"Identifier","src":"504:8:0"}],"id":37,"name":"Assignment","src":"496:16:0"}],"id":38,"name":"ExpressionStatement","src":"496:16:0"}],"id":39,"name":"Block","src":"488:31:0"}],"id":40,"name":"IfStatement","src":"460:59:0"}],"id":41,"name":"Block","src":"454:69:0"}],"id":42,"name":"FunctionDefinition","src":"392:131:0"}],"id":43,"name":"ContractDefinition","src":"216:310:0"},{"attributes":{"contractDependencies":[43],"contractKind":"contract","documentation":null,"fullyImplemented":true,"linearizedBaseContracts":[420,43],"name":"Lottery","scope":421},"children":[{"attributes":{"arguments":[null]},"children":[{"attributes":{"contractScope":null,"name":"Ownable","referencedDeclaration":43,"type":"contractOwnable"},"id":44,"name":"UserDefinedTypeName","src":"596:7:0"}],"id":45,"name":"InheritanceSpecifier","src":"596:7:0"},{"attributes":{"anonymous":false,"name":"PoolUpdated"},"children":[{"children":[{"attributes":{"constant":false,"indexed":false,"name":"_by","scope":51,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":46,"name":"ElementaryTypeName","src":"626:7:0"}],"id":47,"name":"VariableDeclaration","src":"626:11:0"},{"attributes":{"constant":false,"indexed":false,"name":"newValue","scope":51,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":48,"name":"ElementaryTypeName","src":"639:4:0"}],"id":49,"name":"VariableDeclaration","src":"639:13:0"}],"id":50,"name":"ParameterList","src":"625:28:0"}],"id":51,"name":"EventDefinition","src":"608:46:0"},{"attributes":{"anonymous":false,"name":"EntriesAcquired"},"children":[{"children":[{"attributes":{"constant":false,"indexed":false,"name":"_by","scope":57,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":52,"name":"ElementaryTypeName","src":"678:7:0"}],"id":53,"name":"VariableDeclaration","src":"678:11:0"},{"attributes":{"constant":false,"indexed":false,"name":"numberEntries","scope":57,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":54,"name":"ElementaryTypeName","src":"691:4:0"}],"id":55,"name":"VariableDeclaration","src":"691:18:0"}],"id":56,"name":"ParameterList","src":"677:33:0"}],"id":57,"name":"EventDefinition","src":"656:55:0"},{"attributes":{"canonicalName":"Lottery.Winner","name":"Winner","scope":420,"visibility":"public"},"children":[{"attributes":{"constant":false,"name":"winningAddress","scope":62,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":58,"name":"ElementaryTypeName","src":"732:7:0"}],"id":59,"name":"VariableDeclaration","src":"732:22:0"},{"attributes":{"constant":false,"name":"winningAmount","scope":62,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":60,"name":"ElementaryTypeName","src":"758:4:0"}],"id":61,"name":"VariableDeclaration","src":"758:18:0"}],"id":62,"name":"StructDefinition","src":"714:66:0"},{"attributes":{"constant":false,"name":"entries","scope":420,"stateVariable":true,"storageLocation":"default","type":"mapping(address=>uint256)","value":null,"visibility":"public"},"children":[{"attributes":{"type":"mapping(address=>uint256)"},"children":[{"attributes":{"name":"address","type":"address"},"id":63,"name":"ElementaryTypeName","src":"830:7:0"},{"attributes":{"name":"uint","type":"uint256"},"id":64,"name":"ElementaryTypeName","src":"841:4:0"}],"id":65,"name":"Mapping","src":"821:25:0"}],"id":66,"name":"VariableDeclaration","src":"821:40:0"},{"attributes":{"constant":false,"name":"allEntries","scope":420,"stateVariable":true,"storageLocation":"default","type":"address[]storageref","value":null,"visibility":"public"},"children":[{"attributes":{"length":null,"type":"address[]storagepointer"},"children":[{"attributes":{"name":"address","type":"address"},"id":67,"name":"ElementaryTypeName","src":"864:7:0"}],"id":68,"name":"ArrayTypeName","src":"864:9:0"}],"id":69,"name":"VariableDeclaration","src":"864:27:0"},{"attributes":{"constant":false,"name":"totalPool","scope":420,"stateVariable":true,"storageLocation":"default","type":"uint256","value":null,"visibility":"public"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":70,"name":"ElementaryTypeName","src":"894:4:0"}],"id":71,"name":"VariableDeclaration","src":"894:21:0"},{"attributes":{"constant":false,"name":"highestPool","scope":420,"stateVariable":true,"storageLocation":"default","type":"uint256","value":null,"visibility":"public"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":72,"name":"ElementaryTypeName","src":"940:4:0"}],"id":73,"name":"VariableDeclaration","src":"940:23:0"},{"attributes":{"constant":false,"name":"pastWinners","scope":420,"stateVariable":true,"storageLocation":"default","type":"structLottery.Winnerstorageref[]storageref","value":null,"visibility":"public"},"children":[{"attributes":{"length":null,"type":"structLottery.Winnerstorageref[]storagepointer"},"children":[{"attributes":{"contractScope":null,"name":"Winner","referencedDeclaration":62,"type":"structLottery.Winnerstoragepointer"},"id":74,"name":"UserDefinedTypeName","src":"966:6:0"}],"id":75,"name":"ArrayTypeName","src":"966:8:0"}],"id":76,"name":"VariableDeclaration","src":"966:27:0"},{"attributes":{"constant":false,"name":"endTime","scope":420,"stateVariable":true,"storageLocation":"default","type":"uint256","value":null,"visibility":"private"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":77,"name":"ElementaryTypeName","src":"1011:4:0"}],"id":78,"name":"VariableDeclaration","src":"1011:20:0"},{"attributes":{"constant":false,"name":"LOTTO_DURATION","scope":420,"stateVariable":true,"storageLocation":"default","type":"uint256","visibility":"private"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":79,"name":"ElementaryTypeName","src":"1035:4:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3330","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":"seconds","token":"number","type":"int_const30","value":"30"},"id":80,"name":"Literal","src":"1065:10:0"}],"id":81,"name":"VariableDeclaration","src":"1035:40:0"},{"attributes":{"constant":false,"name":"ENTRY_AMOUNT","scope":420,"stateVariable":true,"storageLocation":"default","type":"uint256","visibility":"private"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":82,"name":"ElementaryTypeName","src":"1078:4:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3130","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":"finney","token":"number","type":"int_const10000000000000000","value":"10"},"id":83,"name":"Literal","src":"1106:9:0"}],"id":84,"name":"VariableDeclaration","src":"1078:37:0"},{"attributes":{"name":"requireEntry","visibility":"internal"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":85,"name":"ParameterList","src":"1154:2:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":86,"name":"Identifier","src":"1161:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":">=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"value","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":87,"name":"Identifier","src":"1169:3:0"}],"id":88,"name":"MemberAccess","src":"1169:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":84,"type":"uint256","value":"ENTRY_AMOUNT"},"id":89,"name":"Identifier","src":"1182:12:0"}],"id":90,"name":"BinaryOperation","src":"1169:25:0"}],"id":91,"name":"FunctionCall","src":"1161:34:0"}],"id":92,"name":"ExpressionStatement","src":"1161:34:0"},{"id":93,"name":"PlaceholderStatement","src":"1240:1:0"}],"id":94,"name":"Block","src":"1157:88:0"}],"id":95,"name":"ModifierDefinition","src":"1133:112:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":true,"modifiers":[null],"name":"Lottery","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":96,"name":"ParameterList","src":"1285:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":97,"name":"ParameterList","src":"1295:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":419,"type":"function()","value":"_beginLottery"},"id":98,"name":"Identifier","src":"1299:13:0"}],"id":99,"name":"FunctionCall","src":"1299:15:0"}],"id":100,"name":"ExpressionStatement","src":"1299:15:0"}],"id":101,"name":"Block","src":"1295:23:0"}],"id":102,"name":"FunctionDefinition","src":"1269:49:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"","payable":true,"scope":420,"stateMutability":"payable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":103,"name":"ParameterList","src":"1394:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":104,"name":"ParameterList","src":"1412:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":143,"type":"function()","value":"enterLottery"},"id":105,"name":"Identifier","src":"1416:12:0"}],"id":106,"name":"FunctionCall","src":"1416:14:0"}],"id":107,"name":"ExpressionStatement","src":"1416:14:0"}],"id":108,"name":"Block","src":"1412:22:0"}],"id":109,"name":"FunctionDefinition","src":"1386:48:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"name":"enterLottery","payable":true,"scope":420,"stateMutability":"payable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":110,"name":"ParameterList","src":"1561:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":113,"name":"ParameterList","src":"1592:0:0"},{"attributes":{"arguments":[null]},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":95,"type":"modifier()","value":"requireEntry"},"id":111,"name":"Identifier","src":"1579:12:0"}],"id":112,"name":"ModifierInvocation","src":"1579:12:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"+=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":114,"name":"Identifier","src":"1596:9:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"value","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":115,"name":"Identifier","src":"1609:3:0"}],"id":116,"name":"MemberAccess","src":"1609:9:0"}],"id":117,"name":"Assignment","src":"1596:22:0"}],"id":118,"name":"ExpressionStatement","src":"1596:22:0"},{"attributes":{"assignments":[120]},"children":[{"attributes":{"constant":false,"name":"numEntries","scope":143,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":119,"name":"ElementaryTypeName","src":"1622:4:0"}],"id":120,"name":"VariableDeclaration","src":"1622:15:0"},{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":304,"type":"function()viewreturns(uint256)","value":"_numberOfEntries"},"id":121,"name":"Identifier","src":"1640:16:0"}],"id":122,"name":"FunctionCall","src":"1640:18:0"}],"id":123,"name":"VariableDeclarationStatement","src":"1622:36:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":293,"type":"function(address,uint256)","value":"_addEntriesFor"},"id":124,"name":"Identifier","src":"1662:14:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":125,"name":"Identifier","src":"1677:3:0"}],"id":126,"name":"MemberAccess","src":"1677:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":120,"type":"uint256","value":"numEntries"},"id":127,"name":"Identifier","src":"1689:10:0"}],"id":128,"name":"FunctionCall","src":"1662:38:0"}],"id":129,"name":"ExpressionStatement","src":"1662:38:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":57,"type":"function(address,uint256)","value":"EntriesAcquired"},"id":130,"name":"Identifier","src":"1704:15:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":131,"name":"Identifier","src":"1720:3:0"}],"id":132,"name":"MemberAccess","src":"1720:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":120,"type":"uint256","value":"numEntries"},"id":133,"name":"Identifier","src":"1732:10:0"}],"id":134,"name":"FunctionCall","src":"1704:39:0"}],"id":135,"name":"ExpressionStatement","src":"1704:39:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":51,"type":"function(address,uint256)","value":"PoolUpdated"},"id":136,"name":"Identifier","src":"1747:11:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":137,"name":"Identifier","src":"1759:3:0"}],"id":138,"name":"MemberAccess","src":"1759:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":139,"name":"Identifier","src":"1771:9:0"}],"id":140,"name":"FunctionCall","src":"1747:34:0"}],"id":141,"name":"ExpressionStatement","src":"1747:34:0"}],"id":142,"name":"Block","src":"1592:193:0"}],"id":143,"name":"FunctionDefinition","src":"1540:245:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"name":"enterLotteryFromReferrer","payable":true,"scope":420,"stateMutability":"payable","superFunction":null,"visibility":"public"},"children":[{"children":[{"attributes":{"constant":false,"name":"referrer","scope":177,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":144,"name":"ElementaryTypeName","src":"1822:7:0"}],"id":145,"name":"VariableDeclaration","src":"1822:16:0"}],"id":146,"name":"ParameterList","src":"1821:18:0"},{"attributes":{"parameters":[null]},"children":[],"id":149,"name":"ParameterList","src":"1868:0:0"},{"attributes":{"arguments":[null]},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":95,"type":"modifier()","value":"requireEntry"},"id":147,"name":"Identifier","src":"1855:12:0"}],"id":148,"name":"ModifierInvocation","src":"1855:12:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":150,"name":"Identifier","src":"1872:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"!=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":145,"type":"address","value":"referrer"},"id":151,"name":"Identifier","src":"1880:8:0"},{"attributes":{"argumentTypes":null,"hexvalue":"307830","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const0","value":"0x0"},"id":152,"name":"Literal","src":"1892:3:0"}],"id":153,"name":"BinaryOperation","src":"1880:15:0"}],"id":154,"name":"FunctionCall","src":"1872:24:0"}],"id":155,"name":"ExpressionStatement","src":"1872:24:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":156,"name":"Identifier","src":"1900:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"!=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":145,"type":"address","value":"referrer"},"id":157,"name":"Identifier","src":"1908:8:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":158,"name":"Identifier","src":"1920:3:0"}],"id":159,"name":"MemberAccess","src":"1920:10:0"}],"id":160,"name":"BinaryOperation","src":"1908:22:0"}],"id":161,"name":"FunctionCall","src":"1900:31:0"}],"id":162,"name":"ExpressionStatement","src":"1900:31:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":293,"type":"function(address,uint256)","value":"_addEntriesFor"},"id":163,"name":"Identifier","src":"1935:14:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":145,"type":"address","value":"referrer"},"id":164,"name":"Identifier","src":"1950:8:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":true},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"type":"type(uint256)","value":"uint"},"id":165,"name":"ElementaryTypeNameExpression","src":"1960:4:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"/","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":304,"type":"function()viewreturns(uint256)","value":"_numberOfEntries"},"id":166,"name":"Identifier","src":"1965:16:0"}],"id":167,"name":"FunctionCall","src":"1965:18:0"},{"attributes":{"argumentTypes":null,"hexvalue":"32","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const2","value":"2"},"id":168,"name":"Literal","src":"1986:1:0"}],"id":169,"name":"BinaryOperation","src":"1965:22:0"}],"id":170,"name":"FunctionCall","src":"1960:28:0"}],"id":171,"name":"FunctionCall","src":"1935:54:0"}],"id":172,"name":"ExpressionStatement","src":"1935:54:0"},{"children":[{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":143,"type":"function()","value":"enterLottery"},"id":173,"name":"Identifier","src":"1993:12:0"}],"id":174,"name":"FunctionCall","src":"1993:14:0"}],"id":175,"name":"ExpressionStatement","src":"1993:14:0"}],"id":176,"name":"Block","src":"1868:143:0"}],"id":177,"name":"FunctionDefinition","src":"1788:223:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"name":"endLottery","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":178,"name":"ParameterList","src":"2033:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":181,"name":"ParameterList","src":"2053:0:0"},{"attributes":{"arguments":[null]},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":23,"type":"modifier()","value":"onlyOwner"},"id":179,"name":"Identifier","src":"2043:9:0"}],"id":180,"name":"ModifierInvocation","src":"2043:9:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":182,"name":"Identifier","src":"2057:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_address","typeString":"address"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"==","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"sender","referencedDeclaration":null,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":183,"name":"Identifier","src":"2065:3:0"}],"id":184,"name":"MemberAccess","src":"2065:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":3,"type":"address","value":"owner"},"id":185,"name":"Identifier","src":"2079:5:0"}],"id":186,"name":"BinaryOperation","src":"2065:19:0"}],"id":187,"name":"FunctionCall","src":"2057:28:0"}],"id":188,"name":"ExpressionStatement","src":"2057:28:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":189,"name":"Identifier","src":"2089:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"<","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":78,"type":"uint256","value":"endTime"},"id":190,"name":"Identifier","src":"2097:7:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":434,"type":"uint256","value":"now"},"id":191,"name":"Identifier","src":"2107:3:0"}],"id":192,"name":"BinaryOperation","src":"2097:13:0"}],"id":193,"name":"FunctionCall","src":"2089:22:0"}],"id":194,"name":"ExpressionStatement","src":"2089:22:0"},{"attributes":{"assignments":[195,196]},"children":[{"attributes":{"constant":false,"name":"winner","scope":214,"stateVariable":false,"storageLocation":"default","type":"address","typeName":null,"value":null,"visibility":"internal"},"children":[],"id":195,"name":"VariableDeclaration","src":"2121:6:0"},{"attributes":{"constant":false,"name":"winnings","scope":214,"stateVariable":false,"storageLocation":"default","type":"uint256","typeName":null,"value":null,"visibility":"internal"},"children":[],"id":196,"name":"VariableDeclaration","src":"2129:8:0"},{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple(address,uint256)","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":344,"type":"function()viewreturns(address,uint256)","value":"_declareWinner"},"id":197,"name":"Identifier","src":"2141:14:0"}],"id":198,"name":"FunctionCall","src":"2141:16:0"}],"id":199,"name":"VariableDeclarationStatement","src":"2116:41:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":372,"type":"function(address,uint256)","value":"_transferWinnings"},"id":200,"name":"Identifier","src":"2161:17:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":195,"type":"address","value":"winner"},"id":201,"name":"Identifier","src":"2179:6:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":196,"type":"uint256","value":"winnings"},"id":202,"name":"Identifier","src":"2187:8:0"}],"id":203,"name":"FunctionCall","src":"2161:35:0"}],"id":204,"name":"ExpressionStatement","src":"2161:35:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":398,"type":"function(address,uint256)","value":"_finalizeDrawing"},"id":205,"name":"Identifier","src":"2200:16:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":195,"type":"address","value":"winner"},"id":206,"name":"Identifier","src":"2217:6:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":196,"type":"uint256","value":"winnings"},"id":207,"name":"Identifier","src":"2225:8:0"}],"id":208,"name":"FunctionCall","src":"2200:34:0"}],"id":209,"name":"ExpressionStatement","src":"2200:34:0"},{"children":[{"attributes":{"argumentTypes":null,"arguments":[null],"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[null],"overloadedDeclarations":[null],"referencedDeclaration":409,"type":"function()","value":"_drain"},"id":210,"name":"Identifier","src":"2238:6:0"}],"id":211,"name":"FunctionCall","src":"2238:8:0"}],"id":212,"name":"ExpressionStatement","src":"2238:8:0"}],"id":213,"name":"Block","src":"2053:197:0"}],"id":214,"name":"FunctionDefinition","src":"2014:236:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getTotalPool","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":215,"name":"ParameterList","src":"2288:2:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":222,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":216,"name":"ElementaryTypeName","src":"2316:4:0"}],"id":217,"name":"VariableDeclaration","src":"2316:4:0"}],"id":218,"name":"ParameterList","src":"2315:6:0"},{"children":[{"attributes":{"functionReturnParameters":218},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":219,"name":"Identifier","src":"2333:9:0"}],"id":220,"name":"Return","src":"2326:16:0"}],"id":221,"name":"Block","src":"2322:24:0"}],"id":222,"name":"FunctionDefinition","src":"2267:79:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getAllEntries","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":223,"name":"ParameterList","src":"2371:2:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":231,"stateVariable":false,"storageLocation":"default","type":"address[]memory","value":null,"visibility":"internal"},"children":[{"attributes":{"length":null,"type":"address[]storagepointer"},"children":[{"attributes":{"name":"address","type":"address"},"id":224,"name":"ElementaryTypeName","src":"2399:7:0"}],"id":225,"name":"ArrayTypeName","src":"2399:9:0"}],"id":226,"name":"VariableDeclaration","src":"2399:9:0"}],"id":227,"name":"ParameterList","src":"2398:11:0"},{"children":[{"attributes":{"functionReturnParameters":227},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":69,"type":"address[]storageref","value":"allEntries"},"id":228,"name":"Identifier","src":"2421:10:0"}],"id":229,"name":"Return","src":"2414:17:0"}],"id":230,"name":"Block","src":"2410:25:0"}],"id":231,"name":"FunctionDefinition","src":"2349:86:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getEntryCountForAddress","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"public"},"children":[{"children":[{"attributes":{"constant":false,"name":"_address","scope":243,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":232,"name":"ElementaryTypeName","src":"2471:7:0"}],"id":233,"name":"VariableDeclaration","src":"2471:16:0"}],"id":234,"name":"ParameterList","src":"2470:18:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":243,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":235,"name":"ElementaryTypeName","src":"2514:4:0"}],"id":236,"name":"VariableDeclaration","src":"2514:4:0"}],"id":237,"name":"ParameterList","src":"2513:6:0"},{"children":[{"attributes":{"functionReturnParameters":237},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":66,"type":"mapping(address=>uint256)","value":"entries"},"id":238,"name":"Identifier","src":"2531:7:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":233,"type":"address","value":"_address"},"id":239,"name":"Identifier","src":"2539:8:0"}],"id":240,"name":"IndexAccess","src":"2531:17:0"}],"id":241,"name":"Return","src":"2524:24:0"}],"id":242,"name":"Block","src":"2520:32:0"}],"id":243,"name":"FunctionDefinition","src":"2438:114:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getRemainingTime","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":244,"name":"ParameterList","src":"2580:2:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":253,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":245,"name":"ElementaryTypeName","src":"2608:4:0"}],"id":246,"name":"VariableDeclaration","src":"2608:4:0"}],"id":247,"name":"ParameterList","src":"2607:6:0"},{"children":[{"attributes":{"functionReturnParameters":247},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"-","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":78,"type":"uint256","value":"endTime"},"id":248,"name":"Identifier","src":"2625:7:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":434,"type":"uint256","value":"now"},"id":249,"name":"Identifier","src":"2635:3:0"}],"id":250,"name":"BinaryOperation","src":"2625:13:0"}],"id":251,"name":"Return","src":"2618:20:0"}],"id":252,"name":"Block","src":"2614:28:0"}],"id":253,"name":"FunctionDefinition","src":"2555:87:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"getEndTime","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"public"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":254,"name":"ParameterList","src":"2664:2:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":261,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":255,"name":"ElementaryTypeName","src":"2692:4:0"}],"id":256,"name":"VariableDeclaration","src":"2692:4:0"}],"id":257,"name":"ParameterList","src":"2691:6:0"},{"children":[{"attributes":{"functionReturnParameters":257},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":78,"type":"uint256","value":"endTime"},"id":258,"name":"Identifier","src":"2709:7:0"}],"id":259,"name":"Return","src":"2702:14:0"}],"id":260,"name":"Block","src":"2698:22:0"}],"id":261,"name":"FunctionDefinition","src":"2645:75:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_addEntriesFor","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"private"},"children":[{"children":[{"attributes":{"constant":false,"name":"_address","scope":293,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":262,"name":"ElementaryTypeName","src":"2769:7:0"}],"id":263,"name":"VariableDeclaration","src":"2769:16:0"},{"attributes":{"constant":false,"name":"numEntries","scope":293,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":264,"name":"ElementaryTypeName","src":"2787:4:0"}],"id":265,"name":"VariableDeclaration","src":"2787:15:0"}],"id":266,"name":"ParameterList","src":"2768:35:0"},{"attributes":{"parameters":[null]},"children":[],"id":267,"name":"ParameterList","src":"2812:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"+=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":66,"type":"mapping(address=>uint256)","value":"entries"},"id":268,"name":"Identifier","src":"2816:7:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":263,"type":"address","value":"_address"},"id":269,"name":"Identifier","src":"2824:8:0"}],"id":270,"name":"IndexAccess","src":"2816:17:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":265,"type":"uint256","value":"numEntries"},"id":271,"name":"Identifier","src":"2837:10:0"}],"id":272,"name":"Assignment","src":"2816:31:0"}],"id":273,"name":"ExpressionStatement","src":"2816:31:0"},{"children":[{"attributes":{"assignments":[275]},"children":[{"attributes":{"constant":false,"name":"i","scope":293,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":274,"name":"ElementaryTypeName","src":"2856:4:0"}],"id":275,"name":"VariableDeclaration","src":"2856:6:0"},{"attributes":{"argumentTypes":null,"hexvalue":"30","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const0","value":"0"},"id":276,"name":"Literal","src":"2865:1:0"}],"id":277,"name":"VariableDeclarationStatement","src":"2856:10:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"<","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":275,"type":"uint256","value":"i"},"id":278,"name":"Identifier","src":"2868:1:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":265,"type":"uint256","value":"numEntries"},"id":279,"name":"Identifier","src":"2872:10:0"}],"id":280,"name":"BinaryOperation","src":"2868:14:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"++","prefix":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":275,"type":"uint256","value":"i"},"id":281,"name":"Identifier","src":"2884:1:0"}],"id":282,"name":"UnaryOperation","src":"2884:3:0"}],"id":283,"name":"ExpressionStatement","src":"2884:3:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"push","referencedDeclaration":null,"type":"function(address)returns(uint256)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":69,"type":"address[]storageref","value":"allEntries"},"id":284,"name":"Identifier","src":"2894:10:0"}],"id":286,"name":"MemberAccess","src":"2894:15:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":263,"type":"address","value":"_address"},"id":287,"name":"Identifier","src":"2910:8:0"}],"id":288,"name":"FunctionCall","src":"2894:25:0"}],"id":289,"name":"ExpressionStatement","src":"2894:25:0"}],"id":290,"name":"Block","src":"2889:35:0"}],"id":291,"name":"ForStatement","src":"2851:73:0"}],"id":292,"name":"Block","src":"2812:115:0"}],"id":293,"name":"FunctionDefinition","src":"2745:182:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_numberOfEntries","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"private"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":294,"name":"ParameterList","src":"2955:2:0"},{"children":[{"attributes":{"constant":false,"name":"","scope":304,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":295,"name":"ElementaryTypeName","src":"2980:4:0"}],"id":296,"name":"VariableDeclaration","src":"2980:4:0"}],"id":297,"name":"ParameterList","src":"2979:6:0"},{"children":[{"attributes":{"functionReturnParameters":297},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"/","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"value","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":432,"type":"msg","value":"msg"},"id":298,"name":"Identifier","src":"2997:3:0"}],"id":299,"name":"MemberAccess","src":"2997:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":84,"type":"uint256","value":"ENTRY_AMOUNT"},"id":300,"name":"Identifier","src":"3009:12:0"}],"id":301,"name":"BinaryOperation","src":"2997:24:0"}],"id":302,"name":"Return","src":"2990:31:0"}],"id":303,"name":"Block","src":"2986:39:0"}],"id":304,"name":"FunctionDefinition","src":"2930:95:0"},{"attributes":{"constant":true,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_declareWinner","payable":false,"scope":420,"stateMutability":"view","superFunction":null,"visibility":"private"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":305,"name":"ParameterList","src":"3051:2:0"},{"children":[{"attributes":{"constant":false,"name":"winner","scope":344,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":306,"name":"ElementaryTypeName","src":"3076:7:0"}],"id":307,"name":"VariableDeclaration","src":"3076:14:0"},{"attributes":{"constant":false,"name":"winnings","scope":344,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":308,"name":"ElementaryTypeName","src":"3092:4:0"}],"id":309,"name":"VariableDeclaration","src":"3092:13:0"}],"id":310,"name":"ParameterList","src":"3075:31:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":309,"type":"uint256","value":"winnings"},"id":311,"name":"Identifier","src":"3111:8:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"-","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":312,"name":"Identifier","src":"3122:9:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"/","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":313,"name":"Identifier","src":"3135:9:0"},{"attributes":{"argumentTypes":null,"hexvalue":"3230","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const20","value":"20"},"id":314,"name":"Literal","src":"3147:2:0"}],"id":315,"name":"BinaryOperation","src":"3135:14:0"}],"id":316,"name":"TupleExpression","src":"3134:16:0"}],"id":317,"name":"BinaryOperation","src":"3122:28:0"}],"id":318,"name":"Assignment","src":"3111:39:0"}],"id":319,"name":"ExpressionStatement","src":"3111:39:0"},{"attributes":{"assignments":[321]},"children":[{"attributes":{"constant":false,"name":"winningIndex","scope":344,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":320,"name":"ElementaryTypeName","src":"3154:4:0"}],"id":321,"name":"VariableDeclaration","src":"3154:17:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"%","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":true},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"type":"type(uint256)","value":"uint"},"id":322,"name":"ElementaryTypeNameExpression","src":"3174:4:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"bytes32","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"blockhash","referencedDeclaration":null,"type":"function(uint256)viewreturns(bytes32)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":424,"type":"block","value":"block"},"id":323,"name":"Identifier","src":"3179:5:0"}],"id":324,"name":"MemberAccess","src":"3179:15:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"number","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":424,"type":"block","value":"block"},"id":325,"name":"Identifier","src":"3195:5:0"}],"id":326,"name":"MemberAccess","src":"3195:12:0"}],"id":327,"name":"FunctionCall","src":"3179:29:0"}],"id":328,"name":"FunctionCall","src":"3174:35:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"member_name":"length","referencedDeclaration":null,"type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":69,"type":"address[]storageref","value":"allEntries"},"id":329,"name":"Identifier","src":"3212:10:0"}],"id":330,"name":"MemberAccess","src":"3212:17:0"}],"id":331,"name":"BinaryOperation","src":"3174:55:0"}],"id":332,"name":"VariableDeclarationStatement","src":"3154:75:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":307,"type":"address","value":"winner"},"id":333,"name":"Identifier","src":"3233:6:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"type":"address"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":69,"type":"address[]storageref","value":"allEntries"},"id":334,"name":"Identifier","src":"3242:10:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":321,"type":"uint256","value":"winningIndex"},"id":335,"name":"Identifier","src":"3253:12:0"}],"id":336,"name":"IndexAccess","src":"3242:24:0"}],"id":337,"name":"Assignment","src":"3233:33:0"}],"id":338,"name":"ExpressionStatement","src":"3233:33:0"},{"attributes":{"functionReturnParameters":310},"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"type":"tuple(address,uint256)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":307,"type":"address","value":"winner"},"id":339,"name":"Identifier","src":"3278:6:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":309,"type":"uint256","value":"winnings"},"id":340,"name":"Identifier","src":"3286:8:0"}],"id":341,"name":"TupleExpression","src":"3277:18:0"}],"id":342,"name":"Return","src":"3270:25:0"}],"id":343,"name":"Block","src":"3107:192:0"}],"id":344,"name":"FunctionDefinition","src":"3028:271:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_transferWinnings","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"private"},"children":[{"children":[{"attributes":{"constant":false,"name":"winner","scope":372,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":345,"name":"ElementaryTypeName","src":"3329:7:0"}],"id":346,"name":"VariableDeclaration","src":"3329:14:0"},{"attributes":{"constant":false,"name":"winnings","scope":372,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":347,"name":"ElementaryTypeName","src":"3345:4:0"}],"id":348,"name":"VariableDeclaration","src":"3345:13:0"}],"id":349,"name":"ParameterList","src":"3328:31:0"},{"attributes":{"parameters":[null]},"children":[],"id":350,"name":"ParameterList","src":"3368:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"overloadedDeclarations":[null],"referencedDeclaration":435,"type":"function(bool)pure","value":"require"},"id":351,"name":"Identifier","src":"3372:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"<=","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":348,"type":"uint256","value":"winnings"},"id":352,"name":"Identifier","src":"3380:8:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":353,"name":"Identifier","src":"3392:9:0"}],"id":354,"name":"BinaryOperation","src":"3380:21:0"}],"id":355,"name":"FunctionCall","src":"3372:30:0"}],"id":356,"name":"ExpressionStatement","src":"3372:30:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"transfer","referencedDeclaration":null,"type":"function(uint256)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":346,"type":"address","value":"winner"},"id":357,"name":"Identifier","src":"3406:6:0"}],"id":359,"name":"MemberAccess","src":"3406:15:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":348,"type":"uint256","value":"winnings"},"id":360,"name":"Identifier","src":"3422:8:0"}],"id":361,"name":"FunctionCall","src":"3406:25:0"}],"id":362,"name":"ExpressionStatement","src":"3406:25:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"tuple()","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"transfer","referencedDeclaration":null,"type":"function(uint256)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":3,"type":"address","value":"owner"},"id":363,"name":"Identifier","src":"3435:5:0"}],"id":365,"name":"MemberAccess","src":"3435:14:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"-","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":366,"name":"Identifier","src":"3450:9:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":348,"type":"uint256","value":"winnings"},"id":367,"name":"Identifier","src":"3462:8:0"}],"id":368,"name":"BinaryOperation","src":"3450:20:0"}],"id":369,"name":"FunctionCall","src":"3435:36:0"}],"id":370,"name":"ExpressionStatement","src":"3435:36:0"}],"id":371,"name":"Block","src":"3368:107:0"}],"id":372,"name":"FunctionDefinition","src":"3302:173:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_finalizeDrawing","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"private"},"children":[{"children":[{"attributes":{"constant":false,"name":"winner","scope":398,"stateVariable":false,"storageLocation":"default","type":"address","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"address","type":"address"},"id":373,"name":"ElementaryTypeName","src":"3504:7:0"}],"id":374,"name":"VariableDeclaration","src":"3504:14:0"},{"attributes":{"constant":false,"name":"winnings","scope":398,"stateVariable":false,"storageLocation":"default","type":"uint256","value":null,"visibility":"internal"},"children":[{"attributes":{"name":"uint","type":"uint256"},"id":375,"name":"ElementaryTypeName","src":"3520:4:0"}],"id":376,"name":"VariableDeclaration","src":"3520:13:0"}],"id":377,"name":"ParameterList","src":"3503:31:0"},{"attributes":{"parameters":[null]},"children":[],"id":378,"name":"ParameterList","src":"3543:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":false,"lValueRequested":false,"names":[null],"type":"uint256","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_struct$_Winner_$62_memory","typeString":"structLottery.Winnermemory"}],"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"member_name":"push","referencedDeclaration":null,"type":"function(structLottery.Winnerstorageref)returns(uint256)"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":76,"type":"structLottery.Winnerstorageref[]storageref","value":"pastWinners"},"id":379,"name":"Identifier","src":"3547:11:0"}],"id":381,"name":"MemberAccess","src":"3547:16:0"},{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"isStructConstructorCall":true,"lValueRequested":false,"names":[null],"type":"structLottery.Winnermemory","type_conversion":false},"children":[{"attributes":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"overloadedDeclarations":[null],"referencedDeclaration":62,"type":"type(structLottery.Winnerstoragepointer)","value":"Winner"},"id":382,"name":"Identifier","src":"3564:6:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":374,"type":"address","value":"winner"},"id":383,"name":"Identifier","src":"3571:6:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":376,"type":"uint256","value":"winnings"},"id":384,"name":"Identifier","src":"3579:8:0"}],"id":385,"name":"FunctionCall","src":"3564:24:0"}],"id":386,"name":"FunctionCall","src":"3547:42:0"}],"id":387,"name":"ExpressionStatement","src":"3547:42:0"},{"attributes":{"falseBody":null},"children":[{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":">","type":"bool"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":376,"type":"uint256","value":"winnings"},"id":388,"name":"Identifier","src":"3597:8:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":73,"type":"uint256","value":"highestPool"},"id":389,"name":"Identifier","src":"3608:11:0"}],"id":390,"name":"BinaryOperation","src":"3597:22:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":73,"type":"uint256","value":"highestPool"},"id":391,"name":"Identifier","src":"3626:11:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":376,"type":"uint256","value":"winnings"},"id":392,"name":"Identifier","src":"3640:8:0"}],"id":393,"name":"Assignment","src":"3626:22:0"}],"id":394,"name":"ExpressionStatement","src":"3626:22:0"}],"id":395,"name":"Block","src":"3621:32:0"}],"id":396,"name":"IfStatement","src":"3593:60:0"}],"id":397,"name":"Block","src":"3543:113:0"}],"id":398,"name":"FunctionDefinition","src":"3478:178:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_drain","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"private"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":399,"name":"ParameterList","src":"3674:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":400,"name":"ParameterList","src":"3685:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":71,"type":"uint256","value":"totalPool"},"id":401,"name":"Identifier","src":"3689:9:0"},{"attributes":{"argumentTypes":null,"hexvalue":"30","isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"subdenomination":null,"token":"number","type":"int_const0","value":"0"},"id":402,"name":"Literal","src":"3701:1:0"}],"id":403,"name":"Assignment","src":"3689:13:0"}],"id":404,"name":"ExpressionStatement","src":"3689:13:0"},{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"delete","prefix":true,"type":"tuple()"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":69,"type":"address[]storageref","value":"allEntries"},"id":405,"name":"Identifier","src":"3713:10:0"}],"id":406,"name":"UnaryOperation","src":"3706:17:0"}],"id":407,"name":"ExpressionStatement","src":"3706:17:0"}],"id":408,"name":"Block","src":"3685:62:0"}],"id":409,"name":"FunctionDefinition","src":"3659:88:0"},{"attributes":{"constant":false,"implemented":true,"isConstructor":false,"modifiers":[null],"name":"_beginLottery","payable":false,"scope":420,"stateMutability":"nonpayable","superFunction":null,"visibility":"private"},"children":[{"attributes":{"parameters":[null]},"children":[],"id":410,"name":"ParameterList","src":"3772:2:0"},{"attributes":{"parameters":[null]},"children":[],"id":411,"name":"ParameterList","src":"3783:0:0"},{"children":[{"children":[{"attributes":{"argumentTypes":null,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"=","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":78,"type":"uint256","value":"endTime"},"id":412,"name":"Identifier","src":"3787:7:0"},{"attributes":{"argumentTypes":null,"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"operator":"+","type":"uint256"},"children":[{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":434,"type":"uint256","value":"now"},"id":413,"name":"Identifier","src":"3797:3:0"},{"attributes":{"argumentTypes":null,"overloadedDeclarations":[null],"referencedDeclaration":81,"type":"uint256","value":"LOTTO_DURATION"},"id":414,"name":"Identifier","src":"3803:14:0"}],"id":415,"name":"BinaryOperation","src":"3797:20:0"}],"id":416,"name":"Assignment","src":"3787:30:0"}],"id":417,"name":"ExpressionStatement","src":"3787:30:0"}],"id":418,"name":"Block","src":"3783:38:0"}],"id":419,"name":"FunctionDefinition","src":"3750:71:0"}],"id":420,"name":"ContractDefinition","src":"576:3247:0"}],"id":421,"name":"SourceUnit","src":"0:3823:0"},"compiler":{"name":"solc","version":"0.4.18+commit.9cf6e910.Emscripten.clang"},"networks":{"4447":{"events":{},"links":{},"address":"0xf204a4ef082f5c04bb89f7d5e6568b796096735a"},"1515268168098":{"events":{},"links":{},"address":"0x8fb73a9b047ed20335031498f92002b680c57908"},"1515293047863":{"events":{},"links":{},"address":"0x21c2c52b3ec7b151966ab253c9a42501f866d4cc"},"1515300413455":{"events":{},"links":{},"address":"0xccef88c2d82a18762e780e2d05521eb7b5654073"},"1515343949905":{"events":{},"links":{},"address":"0xc54353a2b0cde02436bb8a14842840a75c5c301a"},"1515462172868":{"events":{},"links":{},"address":"0xb304ac8cbf8e822b4c43a362adc2935af27ffa14"},"1517781910403":{"events":{},"links":{},"address":"0x7cee8f31875311e7a89373939c1077b50cceed88"}},"schemaVersion":"1.0.1","updatedAt":"2018-02-04T22:05:21.349Z"});
        var abiObject = JSON.parse(jsonString);
        var lottoContract = web3.eth.contract(abiObject.abi);

        var LottoContract = lottoContract.at("0xb304ac8cbf8e822b4c43a362adc2935af27ffa14");

        LottoContract.getTotalPool(function (err, result) {
            if (!err) {
                var ethPot = result.c[0];
                $("#totalPool").html(ethPot);
                console.log(result);
            }
        });
        
        $("#enterLottery").click(function() {
            var wei = web3.toWei($("#entryAmount").val(), "ether");
            sendEnterLottery(wei, getReferrer());
        });

        var poolUpdatedEvent = LottoContract.PoolUpdated();

        poolUpdatedEvent.watch(function(err, result) {
            if (!err && result) {
                var ethPot = result.args.newValue.c[0];
                $("#totalPool").html(ethPot);
            }
        });

        // // callback(result)
        // function makeCall(method, callback, ...args) {
        //     var transactionObject = {
        //         from: web3.defaultAccount,
        //         to: LottoContract.address,
        //         data: LottoContract[method].getData(...args)
        //     }

        //     web3.eth.call(transactionObject, function (err, data) {
        //         if (err) {
        //             console.error(err);
        //             return;
        //         }
        //         callback(data);
        //     });
        // }

        


        function estimateGas(transactionObject, callback) {
            web3.eth.estimateGas(transactionObject, function (err, gasEstimate) {
                callback(err, gasEstimate);
            });
        }

        // MARK: - Sending Transactions

        function sendEnterLottery(value, ref) {
            if (ref) {
                sendTransaction("enterLotteryFromReferrer", value, function(err, data) {
                    if (err) {
                        console.error(err);
                        return;
                    }
                    console.log(data);
                }, parseInt(ref));
            } else {
                sendTransaction("enterLottery", value, function(err, data) {
                    if (err) {
                        console.error(err);
                        return;
                    }
                    console.log(data);
                });
            }
        }

        // callback(err, result)
        function sendTransaction(method, value, callback, ...args) {
            // build transaction object
            var transactionObject = {
                from: web3.defaultAccount,
                to: LottoContract.address
            }
            if (value > 0 && Number.isInteger(Number(value))) {
                transactionObject.value = value;
            }
            transactionObject.data = LottoContract[method].getData(...args);

            estimateGas(transactionObject, function (err, gasEstimate) {
                if (err || !gasEstimate) {
                    callback(err);
                    return;
                }
                transactionObject.gas = gasEstimate * 2;
                web3.eth.sendTransaction(transactionObject, callback);
            });
        }

        // MARK: - Helpers

        function getReferrer() {
            return getURLParam("ref");
        }

        function getURLParam(key) {
            var url = new URL(window.location.href);
            return url.searchParams.get(key);
        }

    </script>

</body>
</html>